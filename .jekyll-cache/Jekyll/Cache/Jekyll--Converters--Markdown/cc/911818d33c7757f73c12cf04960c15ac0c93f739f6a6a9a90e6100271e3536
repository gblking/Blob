I"ğJ<h3 id="optional-catch-binding">Optional catch binding</h3>

<p>ä¼ ç»Ÿå†™æ³• catch è¦æ¥å—ä¸€ä¸ª error å‚æ•°ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬å·²ç»çŸ¥é“äº†è¿™ä¸ªå¼‚å¸¸ä¸é‡è¦ï¼Œæˆ–è€…è¯´ï¼Œæˆ‘ä»¬æƒ³å¿½ç•¥æ‰è¿™ä¸ªå¼‚å¸¸ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// old</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="c1">// ....</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ....</span>
<span class="p">}</span>

<span class="c1">// new</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="c1">// ....</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
  <span class="c1">// ....</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="json-superset">JSON superset</h3>

<p>JSON è¢«å½’ä¸º ECMAScript çš„å­é›†, ä¹‹å‰ JSON ä¸æ˜¯ ECMAScript çš„å­é›†ï¼Œä»è€Œå¯¼è‡´æœ‰äº›å¯ä»¥åœ¨ JSON ä¸­åŒ…å«çš„å­—ç¬¦ï¼Œä¸èƒ½å¤Ÿåœ¨ ECMAScript çš„å­—é¢é‡ä¸­å‡ºç°ï¼Œæ¯”å¦‚ U+2028 å’Œ U+2029</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">sourceCode</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">"</span><span class="se">\</span><span class="s1">u2028"</span><span class="dl">'</span><span class="p">;</span>
<span class="nb">eval</span><span class="p">(</span><span class="nx">sourceCode</span><span class="p">);</span> <span class="c1">// SyntaxError</span>

<span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">json</span><span class="p">);</span> <span class="c1">// OK</span>
</code></pre></div></div>

<h3 id="symbolprototypedescription">Symbol.prototype.description</h3>

<h4 id="symbol">Symbol</h4>

<p><code class="language-plaintext highlighter-rouge">Symbol</code>ä¸º ES6 ä¸­æ–°æ·»åŠ çš„æ•°æ®ç±»å‹ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯ç”¨äºå¯¹è±¡çš„å”¯ä¸€å±æ€§åï¼Œè¿™æ ·å…¶ä»–äººå°±ä¸ä¼šä¿®æ”¹ã€è¦†ç›–ä½ è®¾ç½®çš„å±æ€§å€¼ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>Symbol æ•°æ®ç±»å‹çš„ç‰¹ç‚¹æ˜¯å”¯ä¸€æ€§ï¼Œå³ä½¿æ˜¯ç”¨åŒä¸€ä¸ªå˜é‡ç”Ÿæˆçš„å€¼ä¹Ÿä¸ç›¸ç­‰ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">id1</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">id2</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">id1</span> <span class="o">===</span> <span class="nx">id2</span><span class="p">);</span> <span class="c1">// false</span>
</code></pre></div></div>

<p>Symbol æ•°æ®ç±»å‹ä¸å¯è¢« forâ€¦inã€object.keys()è®¿é—®</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">id</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">id</span><span class="p">]:</span> <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">option</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">option</span><span class="p">]);</span> <span class="c1">//ç©º</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å¯é€šè¿‡<code class="language-plaintext highlighter-rouge">Object.getOwnPropertySymbols</code>æ–¹æ³•è®¿é—®ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æˆå‘˜ä¸ºå½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">id</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">id</span><span class="p">]:</span> <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
<span class="kd">let</span> <span class="nx">array</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertySymbols</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">);</span> <span class="c1">//[Symbol(id)]</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">]]);</span> <span class="c1">//'symbol'</span>
</code></pre></div></div>

<p>è™½ç„¶è¿™æ ·ä¿è¯äº† Symbol çš„å”¯ä¸€æ€§ï¼Œä½†æˆ‘ä»¬ä¸æ’é™¤å¸Œæœ›èƒ½å¤Ÿå¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ª symbol å€¼çš„æƒ…å†µã€‚
ä¸ºæ­¤ï¼Œå®˜æ–¹æä¾›äº†å…¨å±€æ³¨å†Œå¹¶ç™»è®°çš„æ–¹æ³•ï¼šSymbol.for()</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">name1</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//æ£€æµ‹åˆ°æœªåˆ›å»ºåæ–°å»º</span>
<span class="kd">let</span> <span class="nx">name2</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//æ£€æµ‹åˆ°å·²åˆ›å»ºåè¿”å›</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name1</span> <span class="o">===</span> <span class="nx">name2</span><span class="p">);</span> <span class="c1">// true</span>
</code></pre></div></div>

<p>é€šè¿‡è¿™ç§æ–¹æ³•å°±å¯ä»¥é€šè¿‡å‚æ•°å€¼è·å–åˆ°å…¨å±€çš„ symbol å¯¹è±¡äº†ï¼Œåä¹‹ï¼Œèƒ½ä¸èƒ½é€šè¿‡ symbol å¯¹è±¡è·å–åˆ°å‚æ•°å€¼å‘¢ï¼Ÿ
æ˜¯å¯ä»¥çš„ ï¼Œé€šè¿‡ Symbol.keyFor()</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">name1</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">name2</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Symbol</span><span class="p">.</span><span class="nx">keyFor</span><span class="p">(</span><span class="nx">name1</span><span class="p">));</span> <span class="c1">// 'name'</span>
</code></pre></div></div>

<h4 id="symbolprototypedescription-1">Symbol.prototype.description</h4>

<p>æˆ‘ä»¬åœ¨åˆ›å»º Symbol çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª description ä½œä¸ºå‚æ•°æ¥æ„å»º Symbol</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">sym</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">"</span><span class="s2">www.flydean.com</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>åœ¨ ES10 ä¹‹å‰ï¼Œæˆ‘ä»¬æƒ³è¦è®¿é—® Symbol çš„ description æ˜¯è¿™æ ·åšçš„ï¼š</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">sym</span><span class="p">));</span> <span class="c1">// Symbol(www.flydean.com)</span>
</code></pre></div></div>

<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ description å±æ€§æ¥è®¿é—®äº†ï¼š</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sym</span><span class="p">.</span><span class="nx">description</span><span class="p">);</span> <span class="c1">// www.flydean.com</span>
</code></pre></div></div>

<h3 id="functionprototypetostring-revision">Function.prototype.toString revision</h3>

<p>toString æ–¹æ³•è¿”å›è¡¨ç¤ºå‡½æ•°æºä»£ç çš„å­—ç¬¦ä¸²</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">sum</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sum</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="c1">// expected output: "function sum(a, b) {</span>
<span class="c1">//                     return a + b;</span>
<span class="c1">//                   }"</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="c1">// expected output: "function abs() { [native code] }"</span>
</code></pre></div></div>

<h3 id="objectfromentries">Object.fromEntries()</h3>

<p>å°†é”®å€¼å¯¹åˆ—è¡¨è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">],</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">baz</span><span class="dl">"</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span>
<span class="p">];</span>

<span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span><span class="nx">entries</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span> <span class="c1">// {foo: "bar", baz: 42}</span>
</code></pre></div></div>

<p>å’Œ fromEntries ç›¸åçš„æ–¹æ³•ï¼Œå°±æ˜¯ Object.entries,ç”¨æ¥éå†å¯¹è±¡å±æ€§ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">newObj</span><span class="p">));</span> <span class="c1">// [ [ 'foo', 1 ], [ 'bar', 2 ] ]</span>
</code></pre></div></div>

<h3 id="well-formed-jsonstringify">Well-formed JSON.stringify</h3>

<p>JSON.stringify å¯¹äºè¿™äº›ä¸å¯è½¬æ¢æˆ UTF-8 çš„å­—ç¬¦ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„ code unit escape sequencesã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="dl">"</span><span class="se">\</span><span class="s2">u{D800}</span><span class="dl">"</span><span class="p">));</span> <span class="c1">// "\ud800"</span>
</code></pre></div></div>

<h3 id="stringprototypetrimstarttrimend">String.prototype.{trimStart,trimEnd}</h3>

<p>å»é™¤å­—ç¬¦ä¸²å¼€å¤´/æœ«å°¾ç©ºç™½</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// trimStart</span>
<span class="kd">const</span> <span class="nx">greeting</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">  Hello everyone  </span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">trimStart</span><span class="p">());</span> <span class="c1">// "Hello everyone  ";</span>

<span class="c1">// trimEnd</span>
<span class="kd">const</span> <span class="nx">greeting</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">  Hello everyone  </span><span class="dl">"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">greeting</span><span class="p">.</span><span class="nx">trimEnd</span><span class="p">());</span> <span class="c1">// "  Hello everyone";</span>
</code></pre></div></div>

<h3 id="arrayprototypeflatflatmap">Array.prototype.{flat,flatMap}</h3>

<h4 id="arrayflat">Array.flat()</h4>

<p>è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æ‰€æœ‰å­æ•°ç»„éƒ½è¢«å±•å¹³ï¼Œå¯æä¾›å¯é€‰çš„ depth å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä»…è¿ç»­è°ƒç”¨å®ƒ</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]]];</span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">flat</span><span class="p">();</span> <span class="c1">// [1, 2, 3, 4, 5, 6, Array(4)];</span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">flat</span><span class="p">().</span><span class="nx">flat</span><span class="p">();</span> <span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9, Array(3)];</span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">flat</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span>

<span class="c1">// å¦‚æœä¸ç¡®å®šæ•°ç»„çš„æ·±åº¦</span>
<span class="nx">arr</span><span class="p">.</span><span class="nx">flat</span><span class="p">(</span><span class="kc">Infinity</span><span class="p">);</span> <span class="c1">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span>
</code></pre></div></div>

<h4 id="flatmap">flatMap()</h4>

<p>flatMap()æ–¹æ³•ä¸ ES6 map()æ–¹æ³•ç›¸åŒï¼Œä½†åŒæ—¶ä¹Ÿå¯ä»¥å±•å¹³ã€‚flatMap()æ–¹æ³•é¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå±•å¹³ä¸ºæ–°æ•°ç»„ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">]);</span>
<span class="c1">// [Array(2), Array(2), Array(2)]</span>
<span class="c1">// 0: (2)[1, 2]</span>
<span class="c1">// 1: (2)[2, 4]</span>
<span class="c1">// 2: (2)[3, 6]</span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">flatMap</span><span class="p">((</span><span class="nx">v</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nx">v</span><span class="p">,</span> <span class="nx">v</span> <span class="o">*</span> <span class="mi">2</span><span class="p">]);</span> <span class="c1">// [1, 2, 2, 4, 3, 6, 4, 8, 5, 10]</span>
</code></pre></div></div>
:ET